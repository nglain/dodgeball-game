<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>–í—ã—à–∏–±–∞–ª—ã Online</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Main Menu -->
  <div id="menu" class="screen">
    <h1>–í–´–®–ò–ë–ê–õ–´</h1>
    <p class="new-year-greeting">üéÖ –° –ù–æ–≤—ã–º 2025 –ì–æ–¥–æ–º! üéÅ</p>
    <div class="menu-buttons">
      <button id="btnBot" class="menu-btn">üéÆ –ò–≥—Ä–∞—Ç—å —Å –ë–æ—Ç–æ–º</button>
      <button id="btnOnline" class="menu-btn">üåê –û–Ω–ª–∞–π–Ω</button>
    </div>
  </div>

  <!-- Bot Settings Menu -->
  <div id="botSettings" class="screen hidden">
    <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h2>
    <div class="settings-form">
      <div class="setting-row">
        <label>–¢–≤–æ–π –Ω–∏–∫:</label>
        <input type="text" id="botPlayerName" placeholder="–ò–≥—Ä–æ–∫" maxlength="12">
      </div>
      <div class="setting-row">
        <label>–¢–≤–æ–π —Ü–≤–µ—Ç:</label>
        <div class="color-picker" id="botColorPicker">
          <div class="color-option selected" data-color="#FF0000" style="background: #FF0000"></div>
          <div class="color-option" data-color="#FF7F00" style="background: #FF7F00"></div>
          <div class="color-option" data-color="#FFFF00" style="background: #FFFF00"></div>
          <div class="color-option" data-color="#00FF00" style="background: #00FF00"></div>
          <div class="color-option" data-color="#0000FF" style="background: #0000FF"></div>
          <div class="color-option" data-color="#4B0082" style="background: #4B0082"></div>
          <div class="color-option" data-color="#9400D3" style="background: #9400D3"></div>
        </div>
      </div>
      <div class="setting-row">
        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–æ—Ç–æ–≤:</label>
        <div class="number-selector">
          <button class="num-btn" data-target="botCount" data-action="minus">-</button>
          <span id="botCount">2</span>
          <button class="num-btn" data-target="botCount" data-action="plus">+</button>
        </div>
      </div>
      <div class="setting-row">
        <label>–í—Ä–µ–º—è —Ä–∞—É–Ω–¥–∞ (—Å–µ–∫):</label>
        <div class="number-selector">
          <button class="num-btn" data-target="roundTime" data-action="minus">-</button>
          <span id="roundTime">60</span>
          <button class="num-btn" data-target="roundTime" data-action="plus">+</button>
        </div>
      </div>
      <div class="setting-row">
        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤:</label>
        <div class="number-selector">
          <button class="num-btn" data-target="roundCount" data-action="minus">-</button>
          <span id="roundCount">3</span>
          <button class="num-btn" data-target="roundCount" data-action="plus">+</button>
        </div>
      </div>
    </div>
    <button id="btnStartBot" class="menu-btn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
    <button id="btnBackBot" class="back-btn">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- Online Menu -->
  <div id="onlineMenu" class="screen hidden">
    <h2>–û–Ω–ª–∞–π–Ω –∏–≥—Ä–∞</h2>
    <div class="settings-form">
      <div class="setting-row">
        <label>–¢–≤–æ–π –Ω–∏–∫:</label>
        <input type="text" id="playerName" placeholder="–ò–≥—Ä–æ–∫" maxlength="12">
      </div>
      <div class="setting-row">
        <label>–¢–≤–æ–π —Ü–≤–µ—Ç:</label>
        <div class="color-picker" id="onlineColorPicker">
          <div class="color-option selected" data-color="#FF0000" style="background: #FF0000"></div>
          <div class="color-option" data-color="#FF7F00" style="background: #FF7F00"></div>
          <div class="color-option" data-color="#FFFF00" style="background: #FFFF00"></div>
          <div class="color-option" data-color="#00FF00" style="background: #00FF00"></div>
          <div class="color-option" data-color="#0000FF" style="background: #0000FF"></div>
          <div class="color-option" data-color="#4B0082" style="background: #4B0082"></div>
          <div class="color-option" data-color="#9400D3" style="background: #9400D3"></div>
        </div>
      </div>
    </div>
    <div class="menu-buttons">
      <button id="btnCreate" class="menu-btn">–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
      <div class="or-divider">–∏–ª–∏</div>
      <div class="input-group">
        <input type="text" id="roomCode" placeholder="–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã" maxlength="6">
        <button id="btnJoin" class="menu-btn small">–í–æ–π—Ç–∏</button>
      </div>
    </div>
    <button id="btnBackOnline" class="back-btn">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- Lobby -->
  <div id="lobby" class="screen hidden">
    <h2>–ö–æ–º–Ω–∞—Ç–∞: <span id="lobbyCode"></span></h2>
    <div id="playerList"></div>

    <!-- Host settings -->
    <div id="hostSettings" class="settings-form hidden">
      <div class="setting-row">
        <label>–í—Ä–µ–º—è —Ä–∞—É–Ω–¥–∞ (—Å–µ–∫):</label>
        <div class="number-selector">
          <button class="num-btn" data-target="lobbyRoundTime" data-action="minus">-</button>
          <span id="lobbyRoundTime">60</span>
          <button class="num-btn" data-target="lobbyRoundTime" data-action="plus">+</button>
        </div>
      </div>
    </div>

    <p class="hint">–ñ–¥—ë–º –∏–≥—Ä–æ–∫–æ–≤ (–º–∏–Ω. 2, –º–∞–∫—Å. 4)</p>
    <button id="btnStart" class="menu-btn" disabled>–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
    <button id="btnLeaveLobby" class="back-btn">–í—ã–π—Ç–∏</button>
  </div>

  <!-- Game Screen -->
  <div id="gameScreen" class="screen hidden">
    <canvas id="gameCanvas"></canvas>

    <!-- Stats Panel -->
    <div id="statsPanel">
      <div id="timerDisplay">
        <span id="timerIcon">‚è±</span>
        <span id="timerValue">60</span>
      </div>
      <div id="roundDisplay">–†–∞—É–Ω–¥: <span id="currentRound">1</span>/<span id="totalRounds">3</span></div>
      <div id="scoreBoard"></div>
    </div>

    <div id="mobileControls" class="hidden">
      <div id="joystick">
        <div id="joystickKnob"></div>
      </div>
      <button id="throwBtn">–ë–†–û–°–û–ö</button>
    </div>
    <div id="gameInfo">
      <span id="statusText"></span>
    </div>
  </div>

  <!-- Game Over Modal -->
  <div id="gameOverModal" class="modal hidden">
    <div class="modal-content">
      <h2 id="winnerText"></h2>
      <p id="gameOverSubtext">–°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã...</p>
    </div>
  </div>

  <!-- Final Results Modal -->
  <div id="finalResultsModal" class="modal hidden">
    <div class="modal-content">
      <h2>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2>
      <div id="finalStats"></div>
      <button id="btnPlayAgain" class="menu-btn">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
      <button id="btnBackToMenu" class="back-btn">–í –º–µ–Ω—é</button>
    </div>
  </div>

  <!-- Error Modal -->
  <div id="errorModal" class="modal hidden">
    <div class="modal-content">
      <h3>–û—à–∏–±–∫–∞</h3>
      <p id="errorText"></p>
      <button id="btnCloseError" class="menu-btn small">OK</button>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="game.js"></script>
</body>
</html>
